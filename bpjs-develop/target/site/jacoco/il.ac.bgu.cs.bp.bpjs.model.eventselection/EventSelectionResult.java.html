<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>EventSelectionResult.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">bp-ide-bpjs-bp-framework</a> &gt; <a href="index.source.html" class="el_package">il.ac.bgu.cs.bp.bpjs.model.eventselection</a> &gt; <span class="el_source">EventSelectionResult.java</span></div><h1>EventSelectionResult.java</h1><pre class="source lang-java linenums">package il.ac.bgu.cs.bp.bpjs.model.eventselection;

import il.ac.bgu.cs.bp.bpjs.model.BProgram;
import il.ac.bgu.cs.bp.bpjs.model.BEvent;
import java.util.Collections;
import java.util.Set;
import static java.util.stream.Collectors.joining;
import static java.util.stream.Collectors.toSet;

/**
 * The result of selecting an event. Contains the {@link #selectedEvent} itself,
 * and a set of indices to remove from the external event queue.
 *
 * This set allows {@link EventSelectionStrategy}s to make the external event
 * queue act like, e.g., a set of events rather than a list.
 *
 * @author michael
 */
public class EventSelectionResult {

    private final BEvent selectedEvent;
    private final Set&lt;Integer&gt; indicesToRemove;

<span class="fc" id="L24">    public EventSelectionResult(BEvent aSelectedEvent, Set&lt;Integer&gt; someIndices) {</span>
<span class="fc" id="L25">        selectedEvent = aSelectedEvent;</span>
<span class="fc" id="L26">        indicesToRemove = someIndices;</span>
<span class="fc bfc" id="L27" title="All 2 branches covered.">        Set&lt;Integer&gt; negIndices = indicesToRemove.stream().filter(i -&gt; i &lt; 0).collect(toSet());</span>
<span class="fc bfc" id="L28" title="All 2 branches covered.">        if (!negIndices.isEmpty()) {</span>
<span class="fc" id="L29">            throw new IllegalArgumentException(&quot;The following indices are illegal: &quot;</span>
<span class="fc" id="L30">                    + negIndices.stream().map(Object::toString).collect(joining(&quot;,&quot;)));</span>
        }
<span class="fc" id="L32">    }</span>

    public EventSelectionResult(BEvent anEvent) {
<span class="fc" id="L35">        this(anEvent, Collections.emptySet());</span>
<span class="fc" id="L36">    }</span>

    @Override
    public String toString() {
<span class="fc" id="L40">        return &quot;[EventSelectionResult event:&quot; + getEvent() + &quot; indices:&quot; + getIndicesToRemove() + &quot;]&quot;;</span>
    }

    public BEvent getEvent() {
<span class="fc" id="L44">        return selectedEvent;</span>
    }

    /**
     * Set of indices of events in the external event queue. These events will
     * be removed from the queue by the {@link BProgram} when the selected event
     * is triggered. 
     * @return Set of event indices in the external events queue.
     */
    public Set&lt;Integer&gt; getIndicesToRemove() {
<span class="fc" id="L54">        return indicesToRemove;</span>
    }

    @Override
    public int hashCode() {
<span class="fc" id="L59">        int hash = 7;</span>
<span class="fc" id="L60">        hash = 23 * hash + this.indicesToRemove.hashCode();</span>
<span class="fc" id="L61">        return hash;</span>
    }

    @Override
    public boolean equals(Object obj) {
<span class="fc bfc" id="L66" title="All 2 branches covered.">        if (this == obj) {</span>
<span class="fc" id="L67">            return true;</span>
        }
<span class="fc bfc" id="L69" title="All 2 branches covered.">        if (obj == null) {</span>
<span class="fc" id="L70">            return false;</span>
        }
<span class="fc bfc" id="L72" title="All 2 branches covered.">        if (getClass() != obj.getClass()) {</span>
<span class="fc" id="L73">            return false;</span>
        }
<span class="fc" id="L75">        final EventSelectionResult other = (EventSelectionResult) obj;</span>
<span class="fc bfc" id="L76" title="All 2 branches covered.">        return selectedEvent.equals(other.getEvent())</span>
<span class="fc bfc" id="L77" title="All 2 branches covered.">                &amp;&amp; indicesToRemove.equals(other.getIndicesToRemove());</span>
    }

}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>